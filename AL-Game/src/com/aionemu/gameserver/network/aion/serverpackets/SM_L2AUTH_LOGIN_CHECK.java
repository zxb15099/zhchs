/**
 * This file is part of Aion-Lightning <aion-lightning.org>.
 *
 *  Aion-Lightning is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU General Public License as published by
 *  the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  Aion-Lightning is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU General Public License for more details. *
 *  You should have received a copy of the GNU General Public License
 *  along with Aion-Lightning.
 *  If not, see <http://www.gnu.org/licenses/>.
 */
package com.aionemu.gameserver.network.aion.serverpackets;

import com.aionemu.gameserver.network.aion.AionConnection;
import com.aionemu.gameserver.network.aion.AionServerPacket;

/**
 * @author -Nemesiss-
 */
public class SM_L2AUTH_LOGIN_CHECK extends AionServerPacket {

	/**
	 * True if client is authed.
	 */
	private final boolean ok;
	private final String accountName;
	private static byte[] data;

	static {
        data = hex2Byte("000000000000000101010202020303030404040505050606060707070808080909090A0A0A0B0B0B0C0C0C0D0"
        + "D0D0E0E0E0F0F0F1010101111111212121313131414141515151616161717171818181919191A1A1A1B1B1B1C1C1C1D1D1D1"
        + "E1E1E1F1F1F2020202121212222222323232424242525252626262727272828282929292A2A2A2B2B2B2C2C2C2D2D2D2E2E2"
        + "E2F2F2F3030303131313232323333333434343535353636363737373838383939393A3A3A3B3B3B3C3C3C3D3D3D3E3E3E3F3"
        + "F3F0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
        + "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
        + "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
        + "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000101010"
        + "202020303030404040505050606060707070808080909090A0A0A0B0B0B0C0C0C0D0D0D0E0E0E0F0F0F10101011111112121"
        + "21313131414141515151616161717171818181919191A1A1A1B1B1B1C1C1C1D1D1D1E1E1E1F1F1F202020212121222222232"
        + "3232424242525252626262727272828282929292A2A2A2B2B2B2C2C2C2D2D2D2E2E2E2F2F2F3030303131313232323333333"
        + "434343535353636363737373838383939393A3A3A3B3B3B3C3C3C3D3D3D3E3E3E3F3F3F8E0010ABD71701006882C42301001"
        + "06258080100804628070100D0EA1E0D0100402D860C01001004C1070100F0888F060100103527070100205C2707010010161"
        + "D0D0500408B1D0D030070001E0D010080271E0D0100904E1E0D0A0010B9FE1E010090E4512A01009011832B0100107BEA2A0"
        + "100104EB9290100A05705120000885B05120000004115130000E8441513000080AA7C12000068AE7C1200003018E21100008"
        + "0EB09120000304513130000406C13130000B0AE7A120000C0D57A12000010CAE111000010F712130000201E13130000E0F21"
        + "413000090607A120000A0877A120000400E7C120000C0E1FB110000D008FC110000608DE21100009002E311000080DBE2110"
        + "000E0C5E3110000E0DCF41100002079F5110000C077E3110000C08EF4110000002BF5110000D09EE3110000D0B5F41100001"
        + "052F51100005066E211000070B4E21100004021E7110000D080E811000080F2F3110000D03D08120000103BE41100007025E"
        + "5110000602C0712000060BB04120000807A07120000802EEA110000A05614130000802700120000106815130000B07D14130"
        + "000F0191513000050D0FA1100003089E4110000B049F911000090A107120000B07E051200001886FA110000008AFA1100009"
        + "0120A120000903005120000E064081200009073E5110000B0EF07120000A0C80712000030B70612000070C409120000A0390"
        + "A120000D0AE0A12000000B30812000010DA08120000200109120000B0600A120000004206120000500507120000C0870A120"
        + "00000BAF2110000C0340312000070530712000030A0F5110000F08B08120000507609120000609D09120000D0FC7A1200001"
        + "0997B1200003082FA11000040A9FA11000040B0E4110000A093FB110000B0D8F611000080D4F811000070E113130000101DE"
        + "9110000C0FFF6110000F0E5F9110000F056FC1100000014E4110000306BE91100004092E9110000C0A505120000E0F305120"
        + "000106906120000302809120000D0CC05120000F01A06120000209006120000404F0912000040DE06120000C01608120000C"
        + "0E8E5110000909E8E060100A0C58E06010090A5C42301004053C6230100E0D9C7230100907F840C0500C0F4840C0300D01B8"
        + "50C0100F069850C01000091850C0A009022661E01006044A835010040E2C3230100106DC3230100");
	}

	/**
	 * Constructs new <tt>SM_L2AUTH_LOGIN_CHECK </tt> packet
	 *
	 * @param ok
	 */
	public SM_L2AUTH_LOGIN_CHECK(boolean ok, String accountName) {
		this.ok = ok;
		this.accountName = accountName;
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	protected void writeImpl(AionConnection con) {
		writeD(ok ? 0x00 : 0x01);
		writeB(data);
		// writeH(171);
		writeS(accountName);
	}

	private static byte[] hex2Byte(String str) {
		byte[] bytes = new byte[str.length() / 2];
		for (int i = 0; i < bytes.length; i++) {
			bytes[i] = (byte) Integer.parseInt(str.substring(2 * i, 2 * i + 2), 16);
		}
		return bytes;
	}
}
